<!-- Navigation Bar -->
<nav class="navbar">
    <div class="nav-brand">
        <h2>ðŸ’§ Soakoja - <%= pageTitle || 'Application' %></h2>
    </div>
    <div class="nav-user">
        <a href="/dashboard" class="btn btn-info" style="margin-right: 1rem; text-decoration: none;">
            <i class="fas fa-home"></i> Accueil
        </a>
        <button class="theme-switcher" onclick="toggleTheme()" title="Changer de thÃ¨me">
            <i class="fas fa-sun theme-icon" id="theme-icon"></i>
        </button>
        <div class="user-info" style="display: flex; align-items: center; gap: 1rem; margin-left: 1rem;">
            <span><strong><%= user.Surnom || user.Nom %></strong></span>
            <span style="font-size: 0.9rem; opacity: 0.8;"><%= user.Poste || 'EmployÃ©' %></span>
            <span style="font-size: 0.8rem; opacity: 0.7;">Niveau: <%= user.niveauMenu || 1 %></span>
            <span style="font-size: 0.8rem; opacity: 0.7;"><%= user.Base || 'Base principale' %></span>
        </div>
        <a href="/logout" style="color: var(--text-secondary); text-decoration: none; margin-left: 1rem;">
            <i class="fas fa-sign-out-alt"></i>
        </a>
    </div>
</nav>

<script>
    // Theme Switcher Functionality
    function toggleTheme() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        
        // Update theme icon
        const themeIcon = document.getElementById('theme-icon');
        if (themeIcon) {
            if (newTheme === 'light') {
                themeIcon.className = 'fas fa-moon theme-icon';
            } else {
                themeIcon.className = 'fas fa-sun theme-icon';
            }
        }
    }
    
    // Load saved theme on page load
    function loadTheme() {
        const savedTheme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', savedTheme);
        
        // Update theme icon
        const themeIcon = document.getElementById('theme-icon');
        if (themeIcon) {
            if (savedTheme === 'light') {
                themeIcon.className = 'fas fa-moon theme-icon';
            } else {
                themeIcon.className = 'fas fa-sun theme-icon';
            }
        }
    }
    
    // Load theme immediately
    loadTheme();
    
    // Also load theme when DOM is ready
    document.addEventListener('DOMContentLoaded', loadTheme);
</script>
